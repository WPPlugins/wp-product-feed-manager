/*!
 * feed-html.js v1.8
 * Part of the WP Product Feed Manager
 * Copyright 2017, Michel Jongbloed
 *
 */
"use strict";function wppfm_staticInputField(b,d,c,a){return'<input type="text" name="static-input-field" id="static-input-field-'+b+"-"+d+"-"+c+'" class="static-input-field" value="'+a+'" onchange="wppfm_staticValueChanged('+b+", "+d+", "+c+')">'}function wppfm_feedStaticValueSelector(g,e,d,f,c,b){var a=wppfm_restrictedStaticFields(b,g);if(a.length>0){return wppfm_displayCorrectStaticField(e,d,f,b,g,c)}else{return wppfm_staticInputField(e,d,f,c)}}function wppfm_staticInputSelect(e,g,f,a,c){var d='<div class="static-value-control" id="static-value-control-'+e+"-"+g+"-"+f+'">';d+='<select class="static-select-control input-select" id="static-condition-input-'+e+"-"+g+"-"+f+'" onchange="wppfm_staticValueChanged('+e+", "+g+", "+f+')">';for(var b=0;b<a.length;b++){if(a[b]!==c){d+='<option value="'+a[b]+'">'+a[b].replace("_"," ")+"</option>"}else{d+='<option value="'+a[b]+'" selected>'+a[b].replace("_"," ")+"</option>"}}d+="</select></div>";return d}function wppfm_advisedSourceSelector(b,a,c){return'<div class="advised-source">'+c+wppfm_editSourceSelector(b,a)+"</div>"}function wppfm_editSourceSelector(b,a){return' (<a class="edit-output wppfm-btn wppfm-btn-small" href="javascript:void(0)" onclick="wppfm_editOutput('+b+", "+a+')">edit</a>)'}function wppfm_forAllProductsCondition(c,d,b){var a=d>0?"other ":"";return'<div class="colw col40w allproducts" id="condition-col-'+c+"-"+d+'" style="display:'+b+'"> for all '+a+'products (<a class="edit-prod-query wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="edit-prod-query-'+c+"-"+d+'" onclick="wppfm_addCondition('+c+", "+d+", 0, '')\">edit</a>)</div>"}function wppfm_editValueSpan(c,b,d,a){return'<div class="edit-value-control" id="value-editor-input-query-add-span-'+c+"-"+b+"-"+d+'" style="display:'+a+'"><p>(<a class="edit-prod-query wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="edit-row-value-'+c+"-"+b+"-"+d+'" onclick="wppfm_addRowValueEditor('+c+", "+b+", "+d+", '')\">edit values</a>)</p></div>"}function wppfm_addFeedSourceRow(d,a,i,f,c){var e=a>0?" dotted-top-line":"";var b="initial";var g=c?wppfm_removeOutputCntrl(d,i.fieldName):"";if(i.customCondition){b="none"}var h='<div class="feed-source-row" id="source-'+d+"-"+a+'">';h+='<div class="add-to-feed-column colw col20w">';h+=a===0?'<span class="output-field-label">'+i.fieldName+"</span>"+g:"&nbsp;";h+="</div>";h+='<div class="source-data-column colw col80w'+e+'" id="source-data-'+d+"-"+a+'">';h+=wppfm_addSourceDataAndQueriesColumn(a,i);h+="</div>";if(a===0&&i.changeValues.length===0){h+=wppfm_editValueSpan(i.rowId,a,0,b)}else{}h+="</div>";return h}function wppfm_removeOutputCntrl(b,c){var a=" (";a+='<a class="remove-output wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="'+b+'" onclick="wppfm_removeRow('+b+", '"+c+"')\">remove</a>";a+=") ";return a}function wppfm_conditionQueryCntrl(b,a,m,k,g,e,f){var c=wppfm_queryOptionsEng();var h=k!==-1?"-"+k:"";var l=k!==-1?", "+k:"";var j='<select class="select-control condition-query-select" id="'+g+"-"+b+"-"+a+"-"+m+h+'" onchange="'+e+"("+b+", "+a+", "+m+l+')"> ';for(var d=0;d<c.length;d++){j+=parseInt(f)!==d?'<option value = "'+d+'">'+c[d]+"</option>":'<option value = "'+d+'" selected>'+c[d]+"</option>"}j+="</select>";return j}function wppfm_valueEditor(d,b,h,a){var l=wppfm_valueStringToValueObject(a[b]);var n=a[h]&&a[h].q?"none":"initial";var m=wppfm_countObjectItems(l)>0?l:wppfm_makeCleanValueObject();var j="and change values ";var g='<div class="change-source-value-wrapper" id="edit-value-span-'+d+"-"+b+'-0">';var e=b===0?' (<a class="remove-value-editor-query wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="remove-value-editor-query-'+d+"-"+b+"-"+h+'" onclick="wppfm_removeValueEditor('+d+", "+b+", "+h+')">remove value editor</a>)':"";if(b>0){j="and "}g+=j;g+=wppfm_changeValueCntrl(d,b,h,m.condition);g+='<span id="value-editor-input-span-'+d+"-"+b+'-0">';g+=wppfm_getCorrectValueSelector(d,b,0,m.condition,m.value,m.endValue);g+="</span>";g+='<span id="value-editor-selectors-'+d+"-"+b+"-"+h+'">';g+=wppfm_forAllProductsAtChangeValuesSelector(d,b,h,n);g+='<span id="value-editor-input-query-remove-span-'+d+"-"+b+"-"+h+'">';g+=e;g+="</span>";g+="</span>";g+='<span id="value-editor-queries-'+d+"-"+b+'-0">';if(a[h]&&a[h].q){for(var f=1;f<a[h].q.length+1;f++){var c=wppfm_convertQueryStringToQueryObject(a[h].q[f-1][f]);var k=f>=a[h].q.length?true:false;g+=wppfm_ifValueQuerySelector(d,b,f,c,k)}}g+="</span></div>";return g}function wppfm_endrow(a){return'<div class="end-row" id="end-row-id-'+a+'">&nbsp;</div>'}function wppfm_forAllProductsAtChangeValuesSelector(d,c,e,b){var a=c>0?"other ":"";return'<div class="colw col30w allproducts" id="value-editor-input-query-span-'+d+"-"+c+'-0" style="display:'+b+';float:right;"> for all '+a+'products (<a class="edit-value-editor-query wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="edit-value-editor-query-'+d+"-"+c+"-"+e+'" onclick="wppfm_addValueEditorQuery('+d+", "+c+', 0)">edit</a>)</div>'}function wppfm_valueOptionsSingleInput(c,b,d,a){return" to"+wppfm_valueOptionsSingleInputValue(c,b,d,a)}function wppfm_valueOptionsElementInput(c,b,d,a){return" with element name"+wppfm_valueOptionsSingleInputValue(c,b,d,a)}function wppfm_valueOptionsSingleInputValue(c,b,d,a){return' <input type="text" onchange="wppfm_valueInputOptionsChanged('+c+", "+b+", "+d+')" id="value-options-input-'+c+"-"+b+"-"+d+'" value="'+a+'">'}function wppfm_valueOptionsReplaceInput(d,c,e,b,a){console.log(b);return'<input type="text" onchange="wppfm_valueInputOptionsChanged('+d+", "+c+", "+e+' )" id="value-options-input-'+d+"-"+c+"-"+e+'" value="'+b+'"> with <input type="text" onchange="wppfm_valueInputOptionsChanged('+d+", "+c+", "+e+')" id="value-options-input-with-'+d+"-"+c+"-"+e+'" value="'+a+'">'}function wppfm_valueOptionsRecalculate(f,e,h,b,d){var g=wppfm_changeValuesRecalculateOptions();var c='<select class="select-value-options" id="value-options-recalculate-options-'+f+"-"+e+'-0">';for(var a=0;a<g.length;a++){c+=g[a]!==b?'<option value = "'+a+'">'+g[a]+"</option>":'<option value = "'+a+'" selected>'+g[a]+"</option>"}c+="</select>";c+=' <input type="text" onchange="wppfm_valueInputOptionsChanged('+f+", "+e+", "+h+')" id="value-options-input-'+f+"-"+e+"-"+h+'" value="'+d+'">';return c}function wppfm_changeValueCntrl(e,a,g,c){var f=wppfm_changeValuesOptions();var d='<select class="select-value-options" id="value-options-'+e+"-"+a+'-0" onchange="wppfm_valueOptionChanged('+e+", "+a+', 0)"> ';for(var b=0;b<f.length;b++){d+=f[b]!==c?'<option value = "'+b+'">'+f[b]+"</option>":'<option value = "'+b+'" selected>'+f[b]+"</option>"}d+="</select>";return d}function wppfm_mapToDefaultCategoryElement(d,c){var a="";var b="";switch(c){case"default":a="Map to Default Category";break;case"shopCategory":a="Use Shop Category";break;default:a=c;break}if(c!=="shopCategory"){b=' (<a class="edit-feed-mapping wppfm-btn wppfm-btn-small" href="javascript:void(0)" data-id="'+d+'" id="edit-feed-mapping-'+d+'" onclick="wppfm_editCategoryMapping('+d+')">edit</a>)'}return'<div class="feed-category-map-to-default" id="feed-category-map-to-default-'+d+'" style="display:initial"><span id="category-text-span-'+d+'">'+a+"</span>"+b+"</div>"}function wppfm_mapToCategoryElement(b,a){return'<div class="feed-category-map" id="feed-category-map-'+b+'" style="display:initial"><span id="category-text-span-'+b+'">'+a+'</span> (<a class="edit-feed-mapping wppfm-btn wppfm-btn-small" href="javascript:void(0)" data-id="'+b+'" id="edit-feed-mapping-'+b+'" onclick="wppfm_editCategoryMapping('+b+')">edit</a>)</div>'}function wppfm_categorySource(){return'<span id="category-source-string">Defined by the Category Mapping Table.</span>'}function wppfm_freeCategoryInputCntrl(b,d,c){var a=c?' value="'+c+'"':"";return'<input type="text" name="free-category" class="free-category-text-input custom-category-'+b+'" id="free-category-text-input" onchange="wppfm_freeCategoryChanged(\''+b+"', '"+d+"')\""+a+">"}function wppfm_inputFieldCntrl(d,b,j,g,l,e,h){var k=l?'<option value="advised" itemprop="basic">Use advised source</option>':"";var c=g?" selected":"";var f=b>0?"or ":"";var a=!e?'<option value="combined" itemprop="basic">Combine source fields</option>':'<option value="combined" selected>Combine source fields</option>';var i=h?'<option value="category_mapping" itemprop="basic">Category Mapping</option>':"";return'<div class="select-control">'+f+'<select class="select-control input-select" id="input-field-cntrl-'+d+"-"+b+'" onchange="wppfm_changedOutput('+d+", "+b+", '"+l+'\')"> <option value="select" itemprop="basic">-- Select a source field --</option>'+k+'<option value="static" itemprop="basic"'+c+">Fill with a static value</option>"+i+a+wppfm_fixedSourcesList(j)+"</select></div>"}function wppfm_combinedInputFieldCntrl(c,a,g,d,i,e){var h=d&&d.startsWith("static#");var b=h?" selected":"";var f=h?wppfm_feedStaticValueSelector(i,c,a,g,d.substring(7),e):"";return'<select class="select-control input-select align-left" id="combined-input-field-cntrl-'+c+"-"+a+"-"+g+'" onchange="wppfm_changedCombinedOutput('+c+", "+a+", "+g+')"> <option value="select" itemprop="basic">-- Select a source field --</option><option value="static" itemprop="basic"'+b+">Fill with a static value</option>"+wppfm_fixedSourcesList(d)+'</select><div class="static-value-control" id="static-value-control-'+c+"-"+a+"-"+g+'">'+f+"</div>"}function wppfm_combinedSeparatorCntrl(d,c,b,a){return'<select class="select-control input-select align-left" id="combined-separator-cntrl-'+d+"-"+c+"-"+b+'" onchange="wppfm_changedCombinationSeparator('+d+", "+c+", "+b+')"> '+wppfm_getCombinedSeparatorList(a)+"</select>"}function wppfm_alternativeInputFieldCntrl(c,b){var a=b==="static"?" selected":"";return'<select class="select-control alternative-input-select" id="alternative-input-field-cntrl-'+c+'" onchange="wppfm_changedAlternativeSource('+c+')"> <option value="select">-- Select a source field --</option><option value="empty">-- an empty field --</option><option value="static"'+a+">Fill with a static value</option>"+wppfm_fixedSourcesList(b)+"</select>"}function wppfm_outputFieldCntrl(b){var a=b===3?'<option value="no-value">-- Add recommended output --</option>':'<option value="no-value">-- Add optional output --</option>';return'<select class="select-control input-select" id="output-field-cntrl-'+b+'"> '+a+wppfm_getOutputFieldsList(b)+"</select>"}function wppfm_customOutputFieldCntrl(){return'<input type="text" name="custom-output-title" id="custom-output-title-input" placeholder="Enter an output title" onfocusout="wppfm_changedCustomOutputTitle()">'}function wppfm_conditionFieldCntrl(b,a,j,i,f,e,g){var h=i!==-1?"-"+i:"";var c=f==="or-field-cntrl"?'<option value="empty">-- Empty field --</option>':"";var d=g?' onchange="'+g+'"':"";return'<select class="select-control input-select" id="'+f+"-"+b+"-"+a+"-"+j+h+'"'+d+'> <option value="select">-- Select a source field --</option>'+c+wppfm_fixedSourcesList(e)+"</select>"}function wppfm_filterPreCntrl(b,a,d){var c='<select id="filter-pre-control-'+b+"-"+a+'" onchange="wppfm_filterChanged('+b+", "+a+')">';if(a>1){return d==="1"?c+'<option value="2">or</option><option value="1" selected>and</option></select>':c+'<option value="2" selected>or</option><option value="1">and</option></select>'}else{return""}}function wppfm_filterSourceCntrl(b,a,c){return'<select class="select-control input-select" id="filter-source-control-'+b+"-"+a+'" onchange="wppfm_filterChanged('+b+", "+a+')"><option value="select">-- Select a source field --</option>'+wppfm_fixedSourcesList(c)+"</select>"}function wppfm_filterOptionsCntrl(b,a,d){var f=wppfm_queryOptionsEng();var e='<select class="select-control condition-query-select" id="filter-options-control-'+b+"-"+a;e+='" onchange="wppfm_filterChanged('+b+", "+a+')">';for(var c=0;c<f.length;c++){e+=parseInt(d)!==c?'<option value = "'+c+'">'+f[c]+"</option>":'<option value = "'+c+'" selected>'+f[c]+"</option>"}e+="</select>";return e}function wppfm_filterInputCntrl(b,h,e,f){var c=b+"-"+h+"-"+e;var d=e>1?" and ":"";var i=e===1?1:3;if(e>1){var g=f&&f.includes("#")?f.split("#")[i]:""}else{var g=f?f:""}var a=e>1&&!g?'style ="display:none"':'style ="display:initial"';return'<span id="filter-input-span-'+c+'"'+a+">"+d+'<input type="text" name="filter-value" id="filter-input-control-'+c+'" onchange="wppfm_filterChanged('+b+", "+h+", "+e+')" value="'+g+'"></span>'};